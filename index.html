<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SATify - Master Your SAT Preparation</title>
    <meta name="description" content="Comprehensive SAT practice platform with progress tracking, adaptive learning, and detailed explanations">
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <!-- MathJax for mathematical expressions -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            mml: {
                displayMath: [['math', 'math']],
                inlineMath: [['math', 'math']]
            },
            options: {
                processHtmlClass: 'tex2jax_process|mathjax_process',
                ignoreHtmlClass: 'tex2jax_ignore|mathjax_ignore'
            },
            startup: {
                ready() {
                    MathJax.startup.defaultReady();
                    window.reprocessMathJax = function() {
                        MathJax.typesetPromise();
                    };
                }
            }
        };
    </script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="logo-large">üìö</div>
            <h2>SATify</h2>
            <div class="loading-spinner"></div>
            <p>Loading your personalized practice experience...</p>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div id="authModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="authTitle">Welcome to SATify</h2>
                <button class="modal-close" id="closeAuth">&times;</button>
            </div>
            <div class="modal-body">
                <div id="loginForm" class="auth-form">
                    <form id="loginFormElement">
                        <div class="form-group">
                            <label for="loginEmail">Email</label>
                            <input type="email" id="loginEmail" required>
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Sign In</button>
                        <p class="auth-switch">Don't have an account? <a href="#" id="showSignup">Sign up</a></p>
                    </form>
                </div>
                <div id="signupForm" class="auth-form hidden">
                    <form id="signupFormElement">
                        <div class="form-group">
                            <label for="signupName">Full Name</label>
                            <input type="text" id="signupName" required>
                        </div>
                        <div class="form-group">
                            <label for="signupEmail">Email</label>
                            <input type="email" id="signupEmail" required>
                        </div>
                        <div class="form-group">
                            <label for="signupPassword">Password</label>
                            <input type="password" id="signupPassword" required>
                        </div>
                        <div class="form-group">
                            <label for="targetScore">Target SAT Score</label>
                            <select id="targetScore">
                                <option value="1200">1200+</option>
                                <option value="1300">1300+</option>
                                <option value="1400" selected>1400+</option>
                                <option value="1500">1500+</option>
                                <option value="1600">1600</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">Create Account</button>
                        <p class="auth-switch">Already have an account? <a href="#" id="showLogin">Sign in</a></p>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="logo">üìö</span>
                <span class="brand-text">SATify</span>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="#home" class="nav-link active" data-page="home">
                    <span class="nav-icon">üè†</span>
                    Home
                </a>
                <a href="#dashboard" class="nav-link" data-page="dashboard">
                    <span class="nav-icon">üìä</span>
                    Dashboard
                </a>
                <a href="#skill-practice" class="nav-link" data-page="skill-practice" id="skillPracticeNavLink" style="display: none;">
                    <span class="nav-icon">üéØ</span>
                    Lessons
                </a>
                <a href="#practice" class="nav-link" data-page="practice">
                    <span class="nav-icon">üìù</span>
                    Practice
                </a>
                <a href="#test" class="nav-link" data-page="test">
                    <span class="nav-icon">‚è±Ô∏è</span>
                    Timed Test
                </a>
                <a href="#progress" class="nav-link" data-page="progress">
                    <span class="nav-icon">üìä</span>
                    Progress
                </a>
                <a href="#review" class="nav-link" data-page="review">
                    <span class="nav-icon">‚≠ê</span>
                    Review
                </a>
                <a href="#creatorStudio" class="nav-link" data-page="creatorStudio" style="display: none;">
                    <span class="nav-icon">üõ†Ô∏è</span>
                    Creator Studio
                </a>
            </div>
            <div class="nav-user">
                <div class="user-info" id="userInfo">
                    <span id="userName">Guest</span>
                    <button class="btn-user-menu" id="userMenuBtn">‚ñº</button>
                    <div class="user-menu hidden" id="userMenu">
                        <div id="userMenuRole" class="role-indicator">Student Mode</div>
                        <a href="#settings" data-page="settings">Settings</a>
                        <a href="#" id="logoutBtn">Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="main-content">
        <!-- Home Page -->
        <div id="homePage" class="page active">
            <div class="hero-container">
                <header class="hero-header" role="banner">
                    <div class="hero-badge" aria-label="SAT Prep">
                        <span>üéì SATify</span>
                        <span aria-hidden="true">‚Ä¢</span>
                        <span>SAT Prep</span>
                    </div>

                    <h1 class="hero-title">Amp Up Your SAT Journey with Smart Strategy.</h1>

                    <p class="hero-subtitle">Simplify prep. Pivot to smarter practice. Boost your confidence. Elevate your score.</p>

                    <nav class="hero-cta" aria-label="primary calls to action">
                        <a class="btn btn-primary" href="#dashboard" role="button" aria-label="Start my SAT boost" data-page="dashboard">
                            <span>üöÄ Start My SAT Boost</span>
                        </a>
                        <a class="btn btn-ghost" href="#practice" role="button" aria-label="See the strategy method" data-page="practice">
                            <span>üéØ See the Strategy Method</span>
                        </a>
                    </nav>

                    <div class="hero-blob" aria-hidden="true"></div>
                </header>

                <main class="hero-main" role="main">
                    <!-- Value points -->
                    <section class="hero-features" aria-label="Key value points">
                        <article class="hero-card">
                            <h3>üöÄ Elevate Your Prep</h3>
                            <p>Strategy‚Äëfirst techniques that cut through test traps.</p>
                        </article>
                        <article class="hero-card">
                            <h3>üìö Simplified Learning</h3>
                            <p>Clear, structured steps that make prep stress‚Äëfree.</p>
                        </article>
                        <article class="hero-card">
                            <h3>üìà Boost Outcomes</h3>
                            <p>A refined approach designed to maximize performance.</p>
                        </article>
                    </section>

                    <!-- Vision + Mission condensed -->
                    <section class="hero-vm" aria-label="Vision and Mission">
                        <p class="hero-line"><strong>Vision:</strong> Make SAT prep simple, smart, and strategy‚Äëfirst ‚Äî accessible to every student.</p>
                        <p class="hero-line"><strong>Mission:</strong> Apply proven methods and expert strategies to improve accuracy under pressure, sharpen precision across all difficulty levels, and outsmart SAT traps with confidence.</p>
                    </section>
                </main>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboardPage" class="page">
            <div class="container">
                <div class="welcome-section">
                    <h1>Welcome back, <span id="welcomeName">Student</span>!</h1>
                    <p class="subtitle">Continue your SAT preparation journey</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-content">
                            <h3 id="totalQuestions">0</h3>
                            <p>Questions Completed</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-content">
                            <h3 id="accuracyRate">0%</h3>
                            <p>Accuracy Rate</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-content">
                            <h3 id="currentStreak">0</h3>
                            <p>Day Streak</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-content">
                            <h3 id="estimatedScore">1200</h3>
                            <p>Estimated Score</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-section">
                        <h2>Quick Practice</h2>
                        <div class="quick-actions">
                            <button class="action-btn" id="continuePractice">
                                <span class="action-icon">‚ñ∂Ô∏è</span>
                                <div>
                                    <h3>Continue Practice</h3>
                                    <p>Pick up where you left off</p>
                                </div>
                            </button>
                            <button class="action-btn" id="weakAreas">
                                <span class="action-icon">üí™</span>
                                <div>
                                    <h3>Work on Weak Areas</h3>
                                    <p>Focus on improvement areas</p>
                                </div>
                            </button>
                            <button class="action-btn" id="timedPractice">
                                <span class="action-icon">‚è∞</span>
                                <div>
                                    <h3>Timed Practice</h3>
                                    <p>Simulate test conditions</p>
                                </div>
                            </button>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <h2>Performance Overview</h2>
                        <div class="performance-chart">
                            <canvas id="performanceChart" width="400" height="200"></canvas>
                        </div>
                    </div>

                    <div class="dashboard-section">
                        <h2>Recent Activity</h2>
                        <div class="activity-list" id="recentActivity">
                            <!-- Activity items will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Learn Page -->
        <div id="learnPage" class="page">
            <div class="container">
                <div class="learn-header">
                    <div>
                        <h1>üìö Learn SAT Skills</h1>
                        <p class="subtitle">Master concepts with interactive lessons</p>
                    </div>
                </div>

                <!-- Skill Categories -->
                <div class="skill-categories">
                    <div class="category-header">
                        <h2>üìñ Reading & Writing</h2>
                        <p>Master vocabulary and comprehension skills</p>
                    </div>

                    <!-- Skills Grid -->
                    <div class="skills-grid">
                        <div class="skill-card coming-soon" data-skill="standard-english-conventions">
                            <div class="skill-header">
                                <div class="skill-icon">üìö</div>
                                <div class="skill-badge">Coming Soon</div>
                            </div>
                            <h3>Standard English Conventions</h3>
                            <p>Grammar, punctuation, and writing mechanics</p>
                            <div class="skill-meta">
                                <span class="duration">‚è±Ô∏è Variable duration</span>
                                <span class="questions">üìù Multiple lessons</span>
                            </div>
                            <div class="skill-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="progress-text">Coming Soon</span>
                            </div>
                        </div>

                        <div class="skill-card coming-soon" data-skill="expression-of-ideas">
                            <div class="skill-header">
                                <div class="skill-icon">‚úçÔ∏è</div>
                                <div class="skill-badge">Coming Soon</div>
                            </div>
                            <h3>Expression of Ideas</h3>
                            <p>Rhetorical synthesis and transitions</p>
                            <div class="skill-meta">
                                <span class="duration">‚è±Ô∏è Variable duration</span>
                                <span class="questions">üìù Multiple lessons</span>
                            </div>
                            <div class="skill-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="progress-text">Coming Soon</span>
                            </div>
                        </div>

                        <div class="skill-card coming-soon" data-skill="craft-and-structure">
                            <div class="skill-header">
                                <div class="skill-icon">üí≠</div>
                                <div class="skill-badge">Coming Soon</div>
                            </div>
                            <h3>Craft and Structure</h3>
                            <p>Words in context strategies with step-by-step guidance</p>
                            <div class="skill-meta">
                                <span class="duration">‚è±Ô∏è 5 min lesson</span>
                                <span class="questions">üìù 10 practice questions</span>
                            </div>
                            <div class="skill-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="progress-text">Coming Soon</span>
                            </div>
                        </div>

                        <!-- Information and Ideas - Now Active -->
                        <div class="skill-card coming-soon" data-skill="information-and-ideas">
                            <div class="skill-header">
                                <div class="skill-icon">üìù</div>
                                <div class="skill-badge">Coming Soon</div>
                            </div>
                            <h3>Information and Ideas</h3>
                            <p>Central ideas, details, and inferences</p>
                            <div class="skill-meta">
                                <span class="duration">‚è±Ô∏è Variable duration</span>
                                <span class="questions">üìù Multiple lessons</span>
                            </div>
                            <div class="skill-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 0%"></div>
                                </div>
                                <span class="progress-text">Coming Soon</span>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>

        <!-- Floating Action Button for Learn/Practice Navigation -->
        <div id="floatingActionBtn" class="floating-action-btn hidden">
            <button id="toggleLearnPractice" class="fab-btn" title="Switch between Learn and Practice">
                <span class="fab-icon">üéì</span>
                <span class="fab-text">Learn</span>
            </button>
        </div>

        <!-- Practice Page -->
        <div id="practicePage" class="page">
            <div class="container">
                <div class="practice-header">
                    <h1>Practice Mode</h1>
                    <div class="practice-controls">
                        <button class="btn" id="practiceSettings">‚öôÔ∏è Settings</button>
                        <button class="btn" id="practiceHints">üí° Hints</button>
                    </div>
                </div>

                <div class="practice-content">
                    <div class="question-panel">
                        <div class="question-header">
                            <div class="question-info">
                                <span class="question-number">Question <span id="currentQuestionNum">1</span> of <span id="totalQuestionsCount">10</span></span>
                                <span class="question-type" id="questionType">Math</span>
                                <span class="difficulty-badge" id="difficultyBadge">Medium</span>
                            </div>
                            <div class="question-controls">
                                <button class="btn-icon" id="bookmarkBtn" title="Bookmark">‚≠ê</button>
                                <button class="btn-icon" id="flagBtn" title="Flag for review">üö©</button>
                            </div>
                        </div>

                        <div class="question-content" id="questionContent">
                            <!-- Question content will be loaded here -->
                        </div>

                        <div class="answer-choices" id="answerChoices">
                            <!-- Answer choices will be loaded here -->
                        </div>

                        <div class="question-actions">
                            <button class="btn btn-secondary" id="prevQuestion">‚Üê Previous</button>
                            <button class="btn btn-primary" id="submitAnswer">Submit Answer</button>
                            <button class="btn btn-secondary" id="nextQuestion">Next ‚Üí</button>
                        </div>
                    </div>

                    <div class="explanation-panel hidden" id="explanationPanel">
                        <div class="explanation-header">
                            <h3>Explanation</h3>
                            <button class="btn-close" id="closeExplanation">√ó</button>
                        </div>
                        <div class="explanation-content" id="explanationContent">
                            <!-- Explanation will be loaded here -->
                        </div>
                        <div class="explanation-actions">
                            <button class="btn btn-secondary" id="practiceMore">Practice More</button>
                            <button class="btn btn-primary" id="nextAfterExplanation">Continue</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Other pages will be added similarly -->
        <div id="testPage" class="page">
            <div class="container">
                <h1>Timed Test Mode</h1>
                <p>Coming soon - Full SAT simulation with timing</p>
            </div>
        </div>

        <div id="progressPage" class="page">
            <div class="container">
                <h1>Progress Analytics</h1>
                <p>Detailed performance tracking and insights</p>
            </div>
        </div>

        <div id="reviewPage" class="page">
            <div class="container">
                <h1>Review & Study</h1>
                <p>Review bookmarked and flagged questions</p>
            </div>
        </div>

        <!-- Words in Context Page -->
        <div id="words-in-contextPage" class="page">
            <div class="container">
                <div class="practice-header">
                    <h1>Words in Context Practice</h1>
                    <div class="practice-controls">
                        <button class="btn btn-secondary" id="wicLearnConcept">üéì Learn This Concept</button>
                    </div>
                </div>

                <div class="practice-content">
                    <div class="question-panel">
                        <div class="question-header">
                            <div class="question-info">
                                <span class="question-number">Question <span id="wicCurrentQuestionNum">1</span> of <span id="wicTotalQuestionsCount">10</span></span>
                                <span class="question-type" id="wicQuestionType">Words in Context</span>
                                <span class="difficulty-badge" id="wicDifficultyBadge">Medium</span>
                            </div>
                            <div class="question-controls">
                                <button class="btn-icon" id="wicBookmarkBtn" title="Bookmark">‚≠ê</button>
                                <button class="btn-icon" id="wicFlagBtn" title="Flag for review">üö©</button>
                                <button class="btn-icon" id="wicStrategyBtn" title="Strategy Breakdown">üéØ</button>
                            </div>
                        </div>

                        <div class="question-content" id="wicQuestionContent">
                            <!-- Question content will be loaded here -->
                        </div>

                        <div class="answer-choices" id="wicAnswerChoices">
                            <!-- Answer choices will be loaded here -->
                        </div>

                        <div class="question-actions">
                            <button class="btn btn-secondary" id="wicPrevQuestion">‚Üê Previous</button>
                            <button class="btn btn-primary" id="wicSubmitAnswer">Submit Answer</button>
                            <button class="btn btn-secondary" id="wicNextQuestion">Next ‚Üí</button>
                        </div>
                    </div>

                    <div class="explanation-panel hidden" id="wicExplanationPanel">
                        <div class="explanation-header">
                            <h3>Explanation</h3>
                            <button class="btn-close" id="wicCloseExplanation">√ó</button>
                        </div>
                        <div class="explanation-content" id="wicExplanationContent">
                            <!-- Explanation will be loaded here -->
                        </div>
                        <div class="explanation-actions">
                            <button class="btn btn-secondary" id="wicPracticeMore">Practice More</button>
                            <button class="btn btn-primary" id="wicNextAfterExplanation">Continue</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Skill Practice Page -->
        <div id="skill-practicePage" class="page">
            <div class="container">
                <div class="skill-practice-header">
                    <h1>üéØ Skill Practice</h1>
                    <p class="subtitle">Practice SAT Reading & Writing by specific skills</p>
                </div>

                <!-- Skill Selection View -->
                <div id="skillSelectionView" class="skill-selection">
                    <div class="practice-mode-selector">
                        <button class="btn mode-btn active" id="individualSkillMode" data-mode="individual">
                            <span class="mode-icon">üéØ</span>
                            <div class="mode-info">
                                <h3>Individual Skills</h3>
                                <p>Practice one specific skill at a time</p>
                            </div>
                        </button>
                        <button class="btn mode-btn" id="topicPracticeMode" data-mode="topic">
                            <span class="mode-icon">üìö</span>
                            <div class="mode-info">
                                <h3>Topic Practice</h3>
                                <p>Mixed questions from all skills in a domain</p>
                            </div>
                        </button>
                    </div>

                    <div class="domains-grid" id="domainsGrid">
                        <!-- Domain cards will be populated here -->
                    </div>
                </div>

                <!-- Practice Session View -->
                <div id="practiceSessionView" class="practice-session hidden">
                    <!-- Strategy Phase -->
                    <div id="strategyPhase" class="strategy-phase">
                        <div class="strategy-header">
                            <h2 id="strategyTitle">Strategy Overview</h2>
                            <p id="strategySubtitle">Review key concepts before starting practice</p>
                        </div>
                        <div id="strategyContent" class="strategy-content">
                            <!-- Strategy slides will be loaded here -->
                        </div>
                        <div class="strategy-actions">
                            <button class="btn btn-secondary" id="skipStrategy">Skip Strategy</button>
                            <button class="btn btn-primary" id="startPractice">Start Practice</button>
                        </div>
                    </div>

                    <!-- Question Phase -->
                    <div id="questionPhase" class="question-phase hidden">
                        <div class="practice-header enhanced">
                            <div class="session-info">
                                <h2 id="sessionTitle">Skill Practice</h2>
                                <div class="session-meta">
                                    <span id="sessionProgress">Question 1 of 20</span>
                                    <span id="sessionSkill">Central Ideas and Details</span>
                                </div>
                            </div>
                            <div class="session-controls">
                                <div class="lesson-navigation" id="lessonNavigation">
                                    <!-- Back to lesson button will be populated here -->
                                </div>
                                <button class="btn btn-secondary" id="endSession">End Session</button>
                            </div>
                        </div>

                        <div class="question-panel">
                            <div class="question-header">
                                <div class="question-info">
                                    <span class="question-number" id="questionNumber">Question 1 of 20</span>
                                    <span class="question-type" id="skillQuestionType">Central Ideas and Details</span>
                                    <span class="difficulty-badge" id="skillDifficultyBadge">Medium</span>
                                </div>
                                <div class="question-controls">
                                    <button class="btn-icon" id="skillBookmarkBtn" title="Bookmark">‚≠ê</button>
                                    <button class="btn-icon" id="skillFlagBtn" title="Flag for review">üö©</button>
                                    <button class="btn-icon" id="skillHintBtn" title="Show strategy hint">üí°</button>
                                </div>
                            </div>

                            <div class="question-content" id="skillQuestionContent">
                                <!-- Question content will be loaded here -->
                            </div>

                            <div class="answer-choices" id="skillAnswerChoices">
                                <!-- Answer choices will be loaded here -->
                            </div>

                            <div class="question-actions">
                                <button class="btn btn-secondary" id="skillPrevQuestion" disabled>‚Üê Previous</button>
                                <button class="btn btn-primary" id="skillSubmitAnswer">Submit Answer</button>
                                <button class="btn btn-secondary" id="skillNextQuestion" disabled>Next ‚Üí</button>
                            </div>
                        </div>

                        <div class="explanation-panel hidden" id="skillExplanationPanel">
                            <div class="explanation-header">
                                <h3>Explanation</h3>
                                <button class="btn-close" id="skillCloseExplanation">√ó</button>
                            </div>
                            <div class="explanation-content" id="skillExplanationContent">
                                <!-- Explanation will be loaded here -->
                            </div>
                            <div class="explanation-actions">
                                <button class="btn btn-secondary" id="reviewStrategy">Review Strategy</button>
                                <button class="btn btn-primary" id="continueAfterExplanation">Continue</button>
                            </div>
                        </div>
                    </div>

                    <!-- Results Phase -->
                    <div id="resultsPhase" class="results-phase hidden">
                        <div class="results-header">
                            <h2>üéâ Session Complete!</h2>
                            <p>Here's how you performed</p>
                        </div>
                        <div class="results-summary" id="resultsSummary">
                            <!-- Results will be populated here -->
                        </div>
                        <div class="results-actions">
                            <button class="btn btn-secondary" id="practiceAgain">Practice Again</button>
                            <button class="btn btn-primary" id="backToSkills">Choose Another Skill</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Creator Studio Page -->
        <div id="creatorStudioPage" class="page">
            <div class="studio-container">
                <!-- Header -->
                <div class="studio-header">
                    <div class="header-content">
                        <h1 class="studio-title">Creator Studio</h1>
                        <p class="studio-subtitle">Build College Board-aligned SAT Reading & Writing lessons</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn-primary" id="createNewLessonBtn">
                            <span class="icon">+</span>
                            New Lesson
                        </button>
                        <button class="btn-secondary" id="viewLibraryBtn">
                            <span class="icon">üìö</span>
                            Lesson Library
                        </button>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="studio-main">
                    <!-- Lesson Creation Panel -->
                    <div class="studio-section" id="lessonCreation">
                        <div class="section-header">
                            <h2>Create New Lesson</h2>
                            <p>Build structured, standards-aligned content for SAT preparation</p>
                        </div>

                        <div class="creation-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="domainSelect" class="form-label">Content Domain</label>
                                    <select id="domainSelect" class="form-select">
                                        <option value="">Select domain...</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="skillSelect" class="form-label">Skill Focus</label>
                                    <select id="skillSelect" class="form-select">
                                        <option value="">Select skill...</option>
                                    </select>
                                </div>
                            </div>

                            <div id="domainInfo" class="info-panel"></div>
                            <div id="skillInfo" class="info-panel"></div>

                            <div class="form-group">
                                <label for="lessonTitle" class="form-label">Lesson Title</label>
                                <input type="text" id="lessonTitle" class="form-input" placeholder="e.g., Context Clues and Vocabulary">
                                <div id="lessonTitleValidation" class="validation-message"></div>
                            </div>

                            <div class="form-group">
                                <label for="learningObjectives" class="form-label">Learning Objectives</label>
                                <textarea id="learningObjectives" class="form-textarea" rows="4" placeholder="Enter learning objectives (one per line)"></textarea>
                                <div id="learningObjectivesValidation" class="validation-message"></div>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="btn-primary" id="createLessonBtn">Create Lesson</button>
                                <button type="button" class="btn-secondary" id="resetFormBtn">Reset Form</button>
                            </div>
                        </div>
                    </div>

                    <!-- Lesson Editor Panel (Hidden Initially) -->
                    <div class="studio-section hidden" id="lessonEditor">
                        <div class="section-header">
                            <h2 id="lessonEditorTitle">Lesson Editor</h2>
                            <div class="editor-controls">
                                <button class="btn-outline" id="togglePreview">Show Preview</button>
                                <button class="btn-primary" id="saveLesson">Save</button>
                                <button class="btn-success" id="publishLesson">Publish</button>
                            </div>
                        </div>

                        <div class="editor-content">
                            <div class="slides-panel">
                                <div class="panel-header">
                                    <h3>Lesson Slides</h3>
                                    <select id="slideTypeSelect" class="form-select-small">
                                        <option value="introduction">Introduction</option>
                                        <option value="concept">Concept</option>
                                        <option value="strategy">Strategy</option>
                                        <option value="example">Example</option>
                                        <option value="summary">Summary</option>
                                    </select>
                                    <button class="btn-small" id="addSlideBtn">Add Slide</button>
                                </div>
                                <div class="slides-container" id="slidesContainer">
                                    <div id="slidesList" class="slides-list"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Preview Panel (Hidden Initially) -->
                    <div class="studio-section hidden" id="previewPanel">
                        <div class="section-header">
                            <h2>Live Preview</h2>
                            <button class="btn-outline" id="closePreviewBtn">Close</button>
                        </div>
                        <div id="previewContent" class="preview-content"></div>
                    </div>

                    <!-- Slide Editor Modal -->
                    <div id="slideEditor" class="modal-overlay hidden">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>Edit Slide</h3>
                                <button class="modal-close" id="closeSlideEditor">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div id="slideEditorContent"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Domain Overview -->
                    <div class="studio-section" id="domainOverview">
                        <div class="section-header">
                            <h2>SAT Reading & Writing Framework</h2>
                            <p>College Board content domains and assessment targets</p>
                        </div>
                        <div class="domains-grid" id="domainsGrid">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>

                </div>

                <!-- Legacy Lesson Editor (Initially Hidden) -->
                <div class="lesson-editor hidden" id="legacyLessonEditor">
                    <div class="editor-header">
                        <h2 id="editorTitle">Create New Lesson</h2>
                        <div class="editor-actions">
                            <button class="btn btn-secondary" id="previewLesson">
                                <span class="btn-icon">üëÅÔ∏è</span>
                                Preview
                            </button>
                            <button class="btn btn-success" id="legacySaveLesson">
                                <span class="btn-icon">üíæ</span>
                                Save Lesson
                            </button>
                            <button class="btn btn-outline" id="cancelEditor">
                                <span class="btn-icon">‚ùå</span>
                                Cancel
                            </button>
                        </div>
                    </div>

                    <!-- Basic Lesson Information -->
                    <div class="editor-section">
                        <h3>üìã Lesson Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="oldLessonTitle">Lesson Title</label>
                                <input type="text" id="oldLessonTitle" class="form-input" placeholder="e.g., Words in Context: Determining Meaning">
                            </div>
                            <div class="form-group">
                                <label for="lessonDomain">Domain</label>
                                <select id="lessonDomain" class="form-select">
                                    <option value="">Select Domain</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="lessonSkill">Skill</label>
                                <select id="lessonSkill" class="form-select">
                                    <option value="">Select Skill</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="lessonDifficulty">Difficulty Level</label>
                                <select id="lessonDifficulty" class="form-select">
                                    <option value="beginner">Beginner</option>
                                    <option value="intermediate">Intermediate</option>
                                    <option value="advanced">Advanced</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="lessonDescription">Description</label>
                            <textarea id="lessonDescription" class="form-textarea" rows="3" placeholder="Brief description of what students will learn"></textarea>
                        </div>
                    </div>

                    <!-- Learning Objectives -->
                    <div class="editor-section">
                        <h3>üéØ Learning Objectives</h3>
                        <div class="objectives-list" id="objectivesList"></div>
                        <button class="btn btn-outline" id="addObjective">
                            <span class="btn-icon">‚ûï</span>
                            Add Learning Objective
                        </button>
                    </div>

                    <!-- Strategy Steps -->
                    <div class="editor-section">
                        <h3>üìã Strategy Steps</h3>
                        <p class="section-description">Define the step-by-step strategy students will learn</p>
                        <div class="strategy-steps-list" id="strategyStepsList"></div>
                        <button class="btn btn-outline" id="addStrategyStep">
                            <span class="btn-icon">‚ûï</span>
                            Add Strategy Step
                        </button>
                    </div>

                    <!-- Lesson Slides -->
                    <div class="editor-section">
                        <h3>üìë Lesson Slides</h3>
                        <div class="slides-list" id="slidesList"></div>
                        <div class="slide-actions">
                            <button class="btn btn-outline" id="addSlide">
                                <span class="btn-icon">‚ûï</span>
                                Add Slide
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Preview Panel (Initially Hidden) -->
                <div class="preview-panel hidden" id="previewPanel">
                    <div class="preview-header">
                        <h2>üëÅÔ∏è Lesson Preview</h2>
                        <button class="btn btn-secondary" id="closePreview">Close Preview</button>
                    </div>
                    <div class="preview-content" id="previewContent"></div>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div id="settingsPage" class="page">
            <div class="container">
                <div class="settings-header">
                    <h1>‚öôÔ∏è Settings</h1>
                    <p class="subtitle">Customize your SATify experience</p>
                </div>

                <div class="settings-grid">
                    <div class="settings-section">
                        <h2>üë§ Account & Role</h2>
                        <div class="setting-item">
                            <label>Current Role:</label>
                            <div id="roleIndicator" class="role-badge student">üë®‚Äçüéì Student</div>
                        </div>
                        <div class="setting-item">
                            <label>Role Toggle (Development Mode):</label>
                            <button id="roleToggle" class="role-toggle-btn">Switch to Instructor</button>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h2>üéØ Practice Preferences</h2>
                        <div class="setting-item">
                            <label for="defaultDifficulty">Default Question Difficulty:</label>
                            <select id="defaultDifficulty">
                                <option value="all">All Levels</option>
                                <option value="easy">Easy</option>
                                <option value="medium" selected>Medium</option>
                                <option value="hard">Hard</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="autoStrategy">Show Strategy Breakdown:</label>
                            <select id="autoStrategy">
                                <option value="manual" selected>Manual (Click to Show)</option>
                                <option value="auto">Automatic After Wrong Answer</option>
                                <option value="always">Always Visible</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="skillPracticeEnabled">
                                Enable Skill-Based Practice (Beta)
                            </label>
                            <small class="setting-description">Practice questions organized by specific SAT Reading & Writing skills</small>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h2>üîî Notifications</h2>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="successNotifications" checked>
                                Success notifications
                            </label>
                        </div>
                        <div class="setting-item">
                            <label>
                                <input type="checkbox" id="progressReminders" checked>
                                Daily progress reminders
                            </label>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h2>üé® Appearance</h2>
                        <div class="setting-item">
                            <label for="themeSelect">Theme:</label>
                            <select id="themeSelect">
                                <option value="light" selected>Light</option>
                                <option value="dark">Dark</option>
                                <option value="auto">Auto (System)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="settings-actions">
                    <button class="btn btn-primary" id="saveSettings">Save Settings</button>
                    <button class="btn btn-secondary" id="resetSettings">Reset to Defaults</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Strategy Hint Modal -->
    <div class="strategy-hint-modal hidden" id="strategyHintModal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>üí° Strategy Hint</h3>
                <button class="btn-close" id="closeStrategyHint">√ó</button>
            </div>
            <div class="modal-body" id="strategyHintContent">
                <!-- Strategy content populated here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="gotItBtn">Got it!</button>
            </div>
        </div>
    </div>

    <!-- Strategy Modal -->
    <div id="strategyModal" class="strategy-modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Strategy Breakdown</h2>
                <button class="modal-close" id="closeStrategy">&times;</button>
            </div>
            <div class="modal-body">
                <div class="strategy-content" id="strategyContent">
                    <div class="strategy-pattern">
                        <h3>Pattern: <span id="strategyPatternName"></span></h3>
                        <p id="strategyPatternDesc"></p>
                    </div>
                    <div class="strategy-steps">
                        <div class="strategy-step">
                            <h4>Step 1: Context Analysis</h4>
                            <p id="strategyStep1"></p>
                        </div>
                        <div class="strategy-step">
                            <h4>Step 2: Bridge Word</h4>
                            <p id="strategyStep2"></p>
                        </div>
                        <div class="strategy-step">
                            <h4>Step 3: Word Cluster</h4>
                            <p id="strategyStep3"></p>
                        </div>
                        <div class="strategy-step">
                            <h4>Step 4: Process of Elimination</h4>
                            <p id="strategyStep4"></p>
                        </div>
                        <div class="strategy-step">
                            <h4>Step 5: Verification</h4>
                            <p id="strategyStep5"></p>
                        </div>
                    </div>
                </div>
                <div class="strategy-actions">
                    <button class="btn btn-secondary" id="strategyPracticeMore">Practice More</button>
                    <button class="btn btn-primary" id="strategyContinue">Continue</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/practice.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/strategy-generator.js"></script>
    <script src="js/words-in-context.js"></script>
    <script src="js/topic-loader.js"></script>
    <script src="js/learn-page.js"></script>
    <script src="js/skill-practice-manager.js"></script>
    <script src="js/skill-practice-ui.js"></script>

    <!-- Creator Studio Scripts (Instructor Only) -->
    <script src="js/role-manager.js"></script>
    <script src="js/creator-studio.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>